# ==============================
# Application Configuration
# ==============================
spring.application.name=url-shortener
server.port=8080


# ==============================
# Database (MySQL)
# ==============================
# Uses environment variables from docker-compose.yml
spring.datasource.url=${DB_URL:jdbc:mysql://mysql:3306/urlshortener?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.username=${DB_USERNAME:urluser}
spring.datasource.password=${DB_PASSWORD:urlpassword}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP Connection Pool
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE:5}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:20000}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_HIKARI_MAX_LIFETIME:1200000}

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true


# ==============================
# Redis Configuration
# ==============================
# IMPORTANT: Use 'redis' (the service name from docker-compose.yml) instead of localhost
spring.data.redis.host=${SPRING_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_REDIS_PORT:6379}
spring.data.redis.timeout=2000


# ==============================
# Actuator (Health / Metrics)
# ==============================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always


# ==============================
# Swagger / OpenAPI
# ==============================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
